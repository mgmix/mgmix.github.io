---
title: "샤딩(Sharding)"
date: 2022-09-24
tags:
- seed
---

샤딩은 데이터베이스를 샤드(Shard) 라고 부르는 작은 단위로 분할 하는 기술을 일컫는다.

모든 샤드는 같은 스키마를 쓰지만, 샤드에 보관되는 데이터 사이에는 중복이 없음플

샤딩 전략
1. 샤딩 키 를 어떻게 정하느냐
	1. 파티션 키라고도 부르는데 데이터가 어떻게 분산 될지 정하는 하나이상의 칼럼으로 구성된다.
	2. 샤딩 키를 통해 올바른 데이터 베이스로 질의를 보내어 데이터 처리를 하므로 효율을 높일 수있음
	3. 샤딩키를 정할때는 데이터를 고르게 분할 할 수있도록 하는게 가장 중요
	4. 해결해야할 문제
		1. 데이터의 재 샤딩 (resharding)
			1. 데이터가 너무 많아져서 하나의 샤드로는 감당하기 어려울 때
			2. 샤드 간 데이터 분포가 균등하지 못해 어떤 샤드에 할당된 공간 소모가 다른 공간에 비해 빨리 진행될 때. 샤드 소진(shard exhaustion) 이 발생하면 샤드 키를 계산하는 함수를 변경하고 데이터를 재 배치 해야한다. 안정해시(consistent hashing) 기법을 활용하면 문제 해결 할 수있다.
		2. 유명 인사 문제 
			1. 특정 샤드에 질의가 집중되어 서버에 과부화가 걸리는 문제, 유명인사가 같은 샤드에 저장되는 데이터베이스가 있따면 소셜 앱을 구축할 시 과부하가 걸릴 수있음
		3. 조인과 비정규화
			1. 데이터 베이스를 여러 샤드 서버로 쪼개고 나면, 여러 샤드에 걸친 데이터를 조인하기 힘들어짐. 해결 방버은 데이터베이스를 비정규화 하여 하나의 테이블에서 질의가 수행 될 수 있도록 하는 것.



[[NoSQL의 다양한 활용 사례]]